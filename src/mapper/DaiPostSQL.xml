<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.DaiPostMapper">

 <resultMap type="DaiPost" id="daipostResultMap"> 
  <result column="dpost_id" property="dpost_id" /> 
  <result column="dpost_time" property="dpost_time" /> 
  <result column="dpost_content" property="dpost_content" /> 
  <result column="dpost_title" property="dpost_title"/> 
  <result column="dpost_type" property="dpost_type"/> 
  <result column="is_solved" property="is_solved"/> 
  <!-- association处理has-a关系 --> 
  <!--注意：这种方式javaType必须指定，表示supervisor的类型是Teacher，否则会报错 --> 
  <association property="user" javaType="User"> 
   <!-- 教师自身的属性与数据库字段的映射 --> 
   <result property="user_sno" column="user_sno"/> 
   <result property="user_nickname" column="user_nickname"/> 
   <result property="user_avatar" column="user_avatar"/> 
   <result property="user_sex" column="user_sex"/> 
   <result property="user_tel" column="user_tel"/> 
   <result property="user_qq" column="user_qq"/> 
  </association> 
 </resultMap>
    <!-- 不要用resultType了，用resultMap -->
	<select id="daikeList" resultMap="daipostResultMap">
		select * 
		from dai_post,user_info
		where dai_post.user_sno = user_info.user_sno and dpost_type='代课'
	</select>
	
	<!-- 这里不要parameterType啦，用注解方式实现多参数！！在Mapper中进行注解啦！！ -->
	<!-- 在mapper.xml中使用的时候，#{对象别名.属性名}，如#{user.id} -->
	<insert id="addBookPost">
		insert into book_post (book_id,book_img,user_sno,book_describe,book_time) 
		values(#{bookpost.book_id},#{bookpost.book_img},#{user.user_sno},#{bookpost.book_describe},#{bookpost.book_time})
	</insert>
	
	<delete id="deleteBookPost" parameterType="BookPost">
		delete from book_post where book_id=#{book_id}
	</delete>
	<select id="getBookPost" parameterType="int" resultType="BookPost">
		select * from book_post where book_id=#{book_id}
	</select>
	<update id="updateBookPost" parameterType="BookPost">
		update book_post set book_img=#{book_img},book_describe=#{book_describe},book_time=#{book_time},where book_id=#{book_id}
	</update>
</mapper>